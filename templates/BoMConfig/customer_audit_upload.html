{% extends "BoMConfig/auditlanding.html" %}
{% load bomconfig_customtemplatetags %}
{% load staticfiles %}
{% block subcontent %}
    <h4 style="margin-top:0;">Customer Part Number Upload</h4>
    {% if status_message %}
    <div class="messageblock {% if status_error %}errorblock{% else %}successblock{% endif %}">
        <p>{{ status_message }}</p>
    </div>
    {% endif %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="customer">Customer:</label>
        <select id="customer" name="customer" required>
            <option value="">------</option>
            {% for cust in customer_list %}
            <option value="{{ cust.id }}">{{ cust.name }}</option>
            {% endfor %}
        </select>
        <br/>
        <label for="file_type">File Type:</label>
        <select id="file_type" name="file_type" required>
            <option value="">------</option>
            <option value="1">BOM Report</option>
            <option value="2">IM Report</option>
        </select>
        <br/>
        <input type="file" name="file" required/>
        <button class="btn btn-primary" type="submit" style="margin-top:10px;">Upload</button>
    </form>
    <script>
        $('a.headtitle:contains("Customer Audit")').css('outline','5px auto -webkit-focus-ring-color').css('background-color','#cccccc');
        $('button[value="upload"]').css('outline','5px auto -webkit-focus-ring-color').css('background-color','#cccccc');
        function cleanDataCheck(link){
            if (link.target == "_blank"){
                window.open(link.dataset.href);
            } else {
                window.location.href = link.dataset.href;
            }
        }

   <!--S-08946:-  Add USCC SAP (MTW as of now) download format to upload for validation -- Added below to show the file type option for MTW CU-->
         $('#customer').change(function(){
            var customerval =  $('#customer').val();
   <!--S-08487: Customer upload changes :- Added below condition to show the file type based on CU i.e IM report only if Sprint,T-Mobile or MTW -->
            if(document.getElementById('customer').value == '3' || document.getElementById('customer').value == '4' || document.getElementById('customer').value == '9' || document.getElementById('customer').value == '6' || document.getElementById('customer').value == '12'){
                file_type[1].style.display = "none";
            }else{
                file_type[1].style.display = "block";
            }
        });
    </script>
{% endblock %}